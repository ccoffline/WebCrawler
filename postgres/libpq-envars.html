<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>33.14. 环境变量</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="libpq-events.html" title="33.13. 事件系统" /><link rel="next" href="libpq-pgpass.html" title="33.15. 口令文件" /></head><body><div style="text-align:right"><a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a><a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/10/postgresql/doc/src/sgml/libpq.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">33.14. 环境变量</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="libpq-events.html" title="33.13. 事件系统">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="libpq.html" title="第 33 章 libpq - C 库">上一级</a></td><th width="60%" align="center">第 33 章 <span xmlns="http://www.w3.org/1999/xhtml" class="application">libpq</span> - C 库</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="libpq-pgpass.html" title="33.15. 口令文件">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="LIBPQ-ENVARS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">33.14. 环境变量</h2></div></div></div><a id="idp28722336" class="indexterm"></a><p>   下列环境变量能被用于选择默认的连接参数值，如果调用代码没有直接指定值，它们将被用于<code class="function">PQconnectdb</code>、<code class="function">PQsetdbLogin</code>和<code class="function">PQsetdb</code>。例如，这些有助于防止数据库连接信息被硬编码到简单的客户端应用中。   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>      <a id="idp28726704" class="indexterm"></a>      <code class="envar">PGHOST</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-HOST">host</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28729200" class="indexterm"></a>      <code class="envar">PGHOSTADDR</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-HOSTADDR">hostaddr</a>连接参数相同。可以设置它来替代或者作为<code class="envar">PGHOST</code>的补充来防止 DNS 查找负担。     </p></li><li class="listitem"><p>      <a id="idp28732272" class="indexterm"></a>      <code class="envar">PGPORT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PORT">port</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28734832" class="indexterm"></a>      <code class="envar">PGDATABASE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-DBNAME">dbname</a>连接参数相同。      </p></li><li class="listitem"><p>      <a id="idp28737424" class="indexterm"></a>      <code class="envar">PGUSER</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-USER">user</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28739952" class="indexterm"></a>      <code class="envar">PGPASSWORD</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PASSWORD">password</a>连接参数相同。出于安全原因，我们不推荐使用这个环境变量，因为某些操作系统允许非根用户通过<span class="application">ps</span>看到进程的环境变量。可以考虑使用口令文件（见<a class="xref" href="libpq-pgpass.html" title="33.15. 口令文件">第 33.15 节</a>）。     </p></li><li class="listitem"><p>      <a id="idp28743952" class="indexterm"></a>      <code class="envar">PGPASSFILE</code>和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PASSFILE">passfile</a>连接参数的行为相同。     </p></li><li class="listitem"><p>      <a id="idp28746576" class="indexterm"></a>      <code class="envar">PGSERVICE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SERVICE">service</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28749104" class="indexterm"></a>      <code class="envar">PGSERVICEFILE</code>指定针对每个用户的连接服务文件名。如果没有设置，默认为<code class="filename">~/.pg_service.conf</code>（见<a class="xref" href="libpq-pgservice.html" title="33.16. 连接服务文件">第 33.16 节</a>）。     </p></li><li class="listitem"><p>      <a id="idp28752304" class="indexterm"></a>      <code class="envar">PGOPTIONS</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-OPTIONS">options</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28754928" class="indexterm"></a>      <code class="envar">PGAPPNAME</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-APPLICATION-NAME">application_name</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28757520" class="indexterm"></a>      <code class="envar">PGSSLMODE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLMODE">sslmode</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28760080" class="indexterm"></a>      <code class="envar">PGREQUIRESSL</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-REQUIRESSL">requiressl</a>连接参数相同。	  为了支持<code class="envar">PGSSLMODE</code>变量，废弃了这个环境变量；	  同时设置这两个变量会抑制这个变量的效果。     </p></li><li class="listitem"><p>      <a id="idp28763152" class="indexterm"></a>      <code class="envar">PGSSLCOMPRESSION</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCOMPRESSION">sslcompression</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28765776" class="indexterm"></a>      <code class="envar">PGSSLCERT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCERT">sslcert</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28768400" class="indexterm"></a>      <code class="envar">PGSSLKEY</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLKEY">sslkey</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28770992" class="indexterm"></a>      <code class="envar">PGSSLROOTCERT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLROOTCERT">sslrootcert</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28773520" class="indexterm"></a>      <code class="envar">PGSSLCRL</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCRL">sslcrl</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28776144" class="indexterm"></a>      <code class="envar">PGREQUIREPEER</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-REQUIREPEER">requirepeer</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28778608" class="indexterm"></a>      <code class="envar">PGKRBSRVNAME</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-KRBSRVNAME">krbsrvname</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28781168" class="indexterm"></a>      <code class="envar">PGGSSLIB</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-GSSLIB">gsslib</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28783728" class="indexterm"></a>      <code class="envar">PGCONNECT_TIMEOUT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-CONNECT-TIMEOUT">connect_timeout</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28786256" class="indexterm"></a>      <code class="envar">PGCLIENTENCODING</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-CLIENT-ENCODING">client_encoding</a>连接参数相同。     </p></li><li class="listitem"><p>      <a id="idp28788816" class="indexterm"></a>      <code class="envar">PGTARGETSESSIONATTRS</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-TARGET-SESSION-ATTRS">target_session_attrs</a>连接参数相同。     </p></li></ul></div><p>  </p><p>   下面的环境变量可用来为每一个<span class="productname">PostgreSQL</span>会话指定默认行为（为每一个用户或每一个数据库设置默认行为的方法还可见<a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>和<a class="xref" href="sql-alterdatabase.html" title="ALTER DATABASE"><span class="refentrytitle">ALTER DATABASE</span></a>命令）。   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>      <a id="idp28794144" class="indexterm"></a>      <code class="envar">PGDATESTYLE</code>设置日期/时间表示的默认风格（等同于<code class="literal">SET datestyle TO ...</code>）。     </p></li><li class="listitem"><p>      <a id="idp28796672" class="indexterm"></a>      <code class="envar">PGTZ</code>设置默认的时区（等同于<code class="literal">SET timezone TO ...</code>）。     </p></li><li class="listitem"><p>      <a id="idp28799184" class="indexterm"></a>      <code class="envar">PGGEQO</code>为遗传查询优化器设置默认模式（等同于<code class="literal">SET geqo TO ...</code>）。     </p></li></ul></div><p>   这些环境变量的正确值可参考<acronym class="acronym">SQL</acronym> 命令 <a class="xref" href="sql-set.html" title="SET"><span class="refentrytitle">SET</span></a>。  </p><p>   下面的环境变量决定<span class="application">libpq</span>的内部行为，它们会覆盖编译在程序中的默认值。   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>      <a id="idp28804272" class="indexterm"></a>      <code class="envar">PGSYSCONFDIR</code>设置包含<code class="filename">pg_service.conf</code>文件以及未来版本中可能出现的其他系统范围配置文件的目录。     </p></li><li class="listitem"><p>      <a id="idp28806848" class="indexterm"></a>      <code class="envar">PGLOCALEDIR</code>设置包含用于消息本地化的<code class="literal">locale</code>文件的目录。     </p></li></ul></div><p>  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="libpq-events.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="libpq.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="libpq-pgpass.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">33.13. 事件系统 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 33.15. 口令文件</td></tr></table></div></body></html>